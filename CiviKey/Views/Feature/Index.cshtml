@model CiviKey.ViewModel.FeatureViewModel
@{
    ViewBag.Title = "Index";
}
@Html.CK().Scripts.ByName().IncludeJS( "setSponsor-1.0.0" ).IncludeJS( "feature.js" )
@*@helper GetDeveloppers( IList<CiviKey.ViewModel.ParticipationViewModel> participations )
    {
    IList<string> developperNames = new List<string>();
    foreach( var item in participations )
    {
        developperNames.Add( item.ContactRelation.Contact.Name );
    }
    @:@developperNames
}*@
<script type="text/javascript">
    $(function () {
        var param = JSON.parse('@Html.Raw( Json.Encode( Model.Sponsors ) )');
        var videoSource = JSON.parse('@Html.Raw( Json.Encode( Model.Videos ) )');

        var options = {
            width: 520,
            height: 4,
            parent: ".js-sponsor"
        }

        document.CK.setVideoSlider(videoSource);
        document.CK.setSponsorHtml(param, options);
    });
</script>
<div class="feature-content">
    <div class="feature-title">
        <div class="feature-title-logo">
        </div>
        <div class="feature-title-text">@Model.Title</div>
        <div style="clear: both;">
        </div>
    </div>
    <div class="feature-info">
        <div class="content-before-video">
            <h1 class="feature-section-title">Description</h1>
                Description</div>
            <div class="feature-description-text">@Html.Raw( Model.Description )</div>
            <h1 class="feature-section-title">Categories</h1>
                Categories</div>
            <div class="feature-description-text category">
                @string.Join( ", ", Model.Categories.Select( c => c.Name ) )
            </div>
        </div>
        <h1 class="feature-section-title">Demo</h1>
            Demo</div>
        <div class="feature-description-text demovideo">
            @for( int i = 0; i < Model.Videos.Count; i++ )
            {
                <div class="feature-demo" id="b@(i)">
                </div>
            }
            <div style="clear: both">
            </div>
            <div id="video">
                <div class="video-bar">
                    <div class="close">
                    </div>
                </div>
                <iframe width="520" height="390" src="" frameborder="0"></iframe>
            </div>
        </div>
        <h1 class="feature-section-title">Sponsorisé par</h1>
            Sponsorisé par</div>
        <div class="feature-description-text js-sponsor">
        </div>
        <h1 class="feature-section-title">Developpé par</h1>
            Developpé par</div>
        <div class="feature-description-text development">
            @foreach( var participation in Model.Participations )
            {
                <div class="development-company">
                    @participation.Value[0].ContactRelation.Contact.Name (@participation.Value[0].ContactRelation.Organization.Name)
                </div>
            }
        </div>
    </div>
</div>
