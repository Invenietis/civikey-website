﻿@model CiviKey.ViewModel.RoadmapViewModel
@{
@*Feature display part*@
    <div class="progress-list-of-features" data-id="@ViewBag.CurrentRoadmapId">
        <div class="accordion" id="accordion2">
            @if( Model.NewFeatures.Count > 0 )
            {
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <div class="collapse-image colapsed">
                        </div>
                        <img src="@Url.Content( "~/Content/images/CategoryIcon/add_24x24.png" )" />
                        <h2 class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                            Nouvelles fonctionnalités (@Model.NewFeatures.Count)
                        </h2>
                    </div>
                    <div id="collapseOne" class="accordion-body collapse in" style="height: 0px;">
                        <div class="accordion-inner">
                            @Html.Partial( "_FeatureCategoryView", Model.NewFeatures )</div>
                    </div>
                </div>
            }
            @if( Model.UpdatedFeatures.Count > 0 )
            {
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <div class="collapse-image colapsed">
                        </div>
                        <img src="@Url.Content( "~/Content/images/CategoryIcon/up_arrow_24x24.png" )" />
                        <h2 class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                            Fonctionnalités améliorées (@Model.UpdatedFeatures.Count)
                        </h2>
                    </div>
                    <div id="collapseTwo" class="accordion-body collapse in">
                        <div class="accordion-inner">
                            @Html.Partial( "_FeatureCategoryView", Model.UpdatedFeatures )
                        </div>
                    </div>
                </div>
            }
            @if( Model.AvailableFeatures.Count > 0 )
            {
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <div class="collapse-image colapsed">
                        </div>
                        <img src="@Url.Content( "~/Content/images/CategoryIcon/check_mark_24x24.png" )" />
                        <h2 class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
                            Fonctionnalités disponibles (@Model.AvailableFeatures.Count)
                        </h2>
                    </div>
                    <div id="collapseThree" class="accordion-body collapse in" style="height: 0px;">
                        <div class="accordion-inner">
                            @Html.Partial( "_FeatureCategoryView", Model.AvailableFeatures )
                        </div>
                    </div>
                </div>
            }
            @if( Model.UnavailableFeatures.Count > 0 )
            {
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <div class="collapse-image colapsed">
                        </div>
                        <img src="@Url.Content( "~/Content/images/CategoryIcon/delete_24x24.png" )" />
                        <h2 class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour">
                            Fonctionnalités non disponibles (@Model.UnavailableFeatures.Count)
                        </h2>
                    </div>
                    <div id="collapseFour" class="accordion-body collapse in" style="height: 0px;">
                        <div class="accordion-inner">
                            @Html.Partial( "_FeatureCategoryView", Model.AvailableFeatures )
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    <script type="text/javascript">
        //        $('.collapse').collapse({ hide: true });
        //$('#accordion2').collapse({ toggle: false });
    </script>

@* Version Download part *@
    <div class="release-info-container @if( !Model.HasRelease )
                                       {@("disabled")}">
        <p>
            Version @Model.Name</p>
        <div class="feature-download-btn">
            <a href="#" class="progress-download-link" title="Téléchargement">&nbsp</a>
        </div>
        @if( !Model.HasRelease )
        {
            <p>
                En cours de développement</p>
        }
    </div>
    @*<div class="mode-toggle-container">
        @Ajax.ActionLink( "Categories", "GetFeatureView", new { id = Model.Id, type = "categorized" }, new AjaxOptions
   {
       InsertionMode = InsertionMode.Replace,
       UpdateTargetId = "featureList",
       OnSuccess = "document.CK.AjaxCallbacks.onProgressCategoryChangeSuccess"
   }, new { @class = "" } )
        @Ajax.ActionLink( "Classique", "GetFeatureView", new { id = Model.Id, type = "classic" }, new AjaxOptions
   {
       InsertionMode = InsertionMode.Replace,
       UpdateTargetId = "featureList",
       OnSuccess = "document.CK.AjaxCallbacks.onProgressCategoryChangeSuccess"
   }, new { @class = "" } )
    </div>*@
}
